"use strict";(self["webpackChunkhrmm"]=self["webpackChunkhrmm"]||[]).push([[588],{6588:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-view"},[s("van-nav-bar",{attrs:{"left-arrow":""},on:{"click-left":function(t){return e.$router.push("/find")}}}),s("div",{staticClass:"container"},[s("h3",[e._v("您好，请登录")]),s("van-form",{ref:"form",attrs:{"show-error":!1},on:{submit:e.onSubmit}},[s("van-field",{ref:"mobile",attrs:{"left-icon":"phone",name:"mobile",placeholder:"请输入手机号",rules:e.rules.mobileRule},model:{value:e.userInfo.mobile,callback:function(t){e.$set(e.userInfo,"mobile",t)},expression:"userInfo.mobile"}}),s("van-field",{staticClass:"codeIcon",attrs:{"left-icon":"passed",name:"code",placeholder:"请输入验证码",rules:e.rules.codeRule},scopedSlots:e._u([{key:"button",fn:function(){return[s("van-button",{staticClass:"getCode",attrs:{size:"small","native-type":"button",disabled:e.codeBtnDisable},on:{click:e.getCode}},[e._v(e._s(e.codeBtnContent))])]},proxy:!0}]),model:{value:e.userInfo.code,callback:function(t){e.$set(e.userInfo,"code",t)},expression:"userInfo.code"}}),s("p",[e._v(" 登录既同意"),s("span",[e._v("《用户使用协议》")]),e._v("和"),s("span",[e._v("《隐私协议》")])]),s("div",[s("van-button",{attrs:{round:"",block:"",color:"#ee0a24","native-type":"submit",loading:e.isLoading}},[e._v("确定")])],1)],1)],1)],1)},o=[],i=s(6165),a={data(){return{userInfo:{mobile:"18888888888",code:""},codeBtnDisable:!1,codeBtnContent:"获取验证码",rules:{mobileRule:[{required:!0,pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"手机号格式错误"}],codeRule:[{required:!0,pattern:/^\d{4}$/,message:"验证码格式错误"}]},isLoading:!1}},methods:{async onSubmit(e){this.isLoading=!0;try{await this.$store.dispatch("getUserInfo",e);const{backUrl:t}=this.$route.query;this.$router.replace(t||"/"),this.isLoading=!1}catch(t){this.isLoading=!1}},async getCode(){this.$refs.form.validateField("mobile").then((async()=>{this.setCodeBtnDisable(5);const{data:e}=await(0,i.WG)({mobile:this.userInfo.mobile});this.userInfo.code=e,this.$toast.success("获取验证码成功："+e)}))},setCodeBtnDisable(e){this.codeBtnDisable=!0,this.codeBtnContent=`${e}s后获取`;const t=setInterval((()=>{this.codeBtnContent=--e+"s后获取",e||(clearInterval(t),this.codeBtnDisable=!1,this.codeBtnContent="发送验证码")}),1e3)}}},r=a,l=s(1001),c=(0,l.Z)(r,n,o,!1,null,"4f75761e",null),u=c.exports}}]);