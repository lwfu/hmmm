"use strict";(self["webpackChunkhrmm"]=self["webpackChunkhrmm"]||[]).push([[277],{5277:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{"left-text":"返回","right-text":"保存","left-arrow":"","right-arrow":"",title:"修改头像"},on:{"click-left":function(e){return t.$router.push("/edit")},"click-right":t.editPhoto}}),a("van-uploader",{attrs:{"after-read":t.afterRead,"before-read":t.beforeRead,"preview-size":"200px","max-count":1,"preview-image":""},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}})],1)},i=[],s=a(6165),l={data(){return{files:[],pic:""}},methods:{beforeRead(t){const e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<10;if(a&&e)return e&&a;this.$toast.fail("请上传1Mb内的jpeg与png图片")},afterRead(t){this.pic=t.file},async editPhoto(){const t=await(0,s.d0)(this.pic);this.files=[{url:"http://hmmm.zllhyy.cn"+t.data[0].url}];const{data:e}=await(0,s.dz)({avatar:t.data[0].id});this.$store.commit("SET_USERINFO",e),this.$toast.success("修改成功")}},created(){this.files.push({url:"http://hmmm.zllhyy.cn"+this.$store.getters.userInfo.avatar})}},n=l,o=a(1001),c=(0,o.Z)(n,r,i,!1,null,"65153740",null),f=c.exports}}]);