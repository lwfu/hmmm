"use strict";(self["webpackChunkhrmm"]=self["webpackChunkhrmm"]||[]).push([[277],{65277:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("van-nav-bar",{attrs:{"left-text":"返回","right-text":"保存","left-arrow":"","right-arrow":"",title:"修改头像"},on:{"click-left":function(t){return e.$router.push("/edit")},"click-right":e.editPhoto}}),r("van-uploader",{attrs:{"after-read":e.afterRead,"before-read":e.beforeRead,"preview-size":"200px","max-count":1,"preview-image":""},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1)},n=[],i=r(67906),s=r(16198),u=r(16165),c={data:function(){return{files:[],pic:""}},methods:{beforeRead:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,r=e.size/1024/1024<10;if(r&&t)return t&&r;this.$toast.fail("请上传1Mb内的jpeg与png图片")},afterRead:function(e){this.pic=e.file},editPhoto:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){var r,a,n;return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,u.d0)(e.pic);case 2:return r=t.sent,e.files=[{url:"http://hmmm.zllhyy.cn"+r.data[0].url}],t.next=6,(0,u.dz)({avatar:r.data[0].id});case 6:a=t.sent,n=a.data,e.$store.commit("SET_USERINFO",n),e.$toast.success("修改成功");case 10:case"end":return t.stop()}}),t)})))()}},created:function(){this.files.push({url:"http://hmmm.zllhyy.cn"+this.$store.getters.userInfo.avatar})}},l=c,o=r(1001),f=(0,o.Z)(l,a,n,!1,null,"65153740",null),h=f.exports}}]);