"use strict";(self["webpackChunkhrmm"]=self["webpackChunkhrmm"]||[]).push([[323],{2323:function(s,t,e){e.r(t),e.d(t,{default:function(){return w}});var i=function(){var s=this,t=s.$createElement,e=s._self._c||t;return s.curQuestion?e("div",{staticClass:"interview"},[e("van-nav-bar",{attrs:{"right-text":"答题卡","left-arrow":"",fixed:"",placeholder:""},on:{"click-right":function(t){s.answerSheetVisible=!0},"click-left":s.goBack},scopedSlots:s._u([{key:"title",fn:function(){return[e("span",[s._v("面试题")]),e("span",{staticClass:"count"},[s._v(s._s(s.allQuestion.length))])]},proxy:!0}],null,!1,3357406339)}),e("div",{staticClass:"interview-main"},[e("div",{staticClass:"question_item"},[e("div",{staticClass:"question_title"},[s._v(" "+s._s(s._f("enumType")(s.curQuestion.detail.type))+s._s(s.curQuestion.detail.title)+" ")]),s._l(s.curQuestion.detail.tag,(function(t){return e("van-tag",{key:t,staticClass:"question_tag",attrs:{size:"large"}},[s._v(" "+s._s(t)+" ")])})),s._l(s.curQuestion.detail.option,(function(t,i){return e("div",{key:i,staticClass:"question_option",class:[{correctClass:s.findCorrectAnswer&&s.findCorrectAnswer.includes(s.optionKeys[i]),errorClass:s.findAnswerList&&!s.findAnswerList.analysis.isRight&&(s.singleAnswer===s.optionKeys[i]||s.multipleAnswer.filter((function(t){return!s.findCorrectAnswer.includes(t)})).includes(s.optionKeys[i])),active:s.findAnswerList&&(s.singleAnswer===s.optionKeys[i]||s.multipleAnswer.filter((function(t){return!s.findCorrectAnswer.includes(t)})).includes(s.optionKeys[i]))},s.optionKeys[i]],on:{click:function(t){return s.chose(t,s.optionKeys[i])}}},[s._v(" "+s._s(s.optionKeys[i])+"."+s._s(t)+" ")])})),s.curQuestion.detail.option?s._e():e("div",[e("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",placeholder:"请输入你的答案",disabled:s.messageDisable},model:{value:s.messageAnswer,callback:function(t){s.messageAnswer=t},expression:"messageAnswer"}})],1),s.findAnswerList?e("div",{staticClass:"question-analysis"},[e("h4",[s._v("答案解析")]),3!==s.curQuestion.detail.type?e("div",[e("p",[s._v(" 正确答案："+s._s([].concat(s.findCorrectAnswer).join(","))+" ")]),e("p",{class:{yourErrorAnswerStyle:!s.findAnswerList.analysis.isRight}},[s._v(" 你的答案："+s._s([].concat(s.yourChose).join(","))+" ")])]):s._e(),e("div",{staticClass:"analysis-tag"},[e("span",[s._v("难度："+s._s(s._f("enumDifficulty")(s.findAnswerList.analysis.difficulty)))]),e("span",[s._v("提交次数："+s._s(s.findAnswerList.analysis.submitNum))]),e("span",[s._v("正确次数："+s._s(s.findAnswerList.analysis.correctNum))])]),e("div",{staticClass:"analysis-text"},[s._v(" "+s._s(s.findAnswerList.analysis.answerAnalysis)+" ")])]):s._e()],2)]),e("div",{staticClass:"interview-tabbar"},[e("div",{staticClass:"interview-tabbar-icon"},[e("div",{staticClass:"star"},[e("van-icon",{attrs:{name:"star-o"}}),e("span",[s._v("收藏")])],1),e("div",{staticClass:"edit"},[e("van-icon",{attrs:{name:"edit"}}),e("span",[s._v("反馈")])],1)]),e("div",{staticClass:"interview-tabbar-count"},[e("span",{staticClass:"current"},[s._v(s._s(s.curKey+1))]),e("span",{staticClass:"total"},[s._v("/"+s._s(s.allQuestion.length)+"题")])]),e("div",{staticClass:"interview-tabbar-button"},[s.isSubmit?e("van-button",{attrs:{type:"info"},on:{click:s.getNextQuestion}},[s._v("下一题")]):e("van-button",{attrs:{type:"danger",disabled:!s.isChose},on:{click:s.submitQuestion}},[s._v(" 提 交 ")])],1)]),e("van-popup",{staticClass:"answer-sheet",style:{height:"60%"},attrs:{position:"bottom"},model:{value:s.answerSheetVisible,callback:function(t){s.answerSheetVisible=t},expression:"answerSheetVisible"}},[e("van-nav-bar",{attrs:{title:"答题卡"},scopedSlots:s._u([{key:"right",fn:function(){return[e("span",{staticClass:"current"},[s._v(s._s(s.curKey+1))]),e("span",[s._v("/"+s._s(s.allQuestion.length)+"题")])]},proxy:!0}],null,!1,3074321077)}),e("div",{staticClass:"total"},[s._v(" 共"+s._s(s.allQuestion.length)+"题 ")]),e("ul",{staticClass:"list"},s._l(s.allQuestion.length,(function(t,i){return e("li",{key:t,class:{current:i===s.curKey,correct:s.answerList.find((function(s){return s.curKey===i}))&&s.answerList.find((function(s){return s.curKey===i})).analysis.isRight,error:s.answerList.find((function(s){return s.curKey===i}))&&!s.answerList.find((function(s){return s.curKey===i})).analysis.isRight},on:{click:function(t){return s.getQuestionsDetails(i)}}},[s._v(" "+s._s(t)+" ")])})),0)],1)],1):s._e()},n=[],r=(e(6699),e(4612)),a=e(5972);const l=s=>(0,a.Z)({url:"/questions/submit",method:"POST",data:s}),u=s=>(0,a.Z)({url:"/questions/"+s});var o={data(){return{questionParams:{type:this.$route.params.questionId||"",city:this.$route.params.city||""},answerSheetVisible:!1,allQuestion:[],answerList:[],curKey:0,singleAnswer:"",multipleAnswer:[],messageAnswer:"",optionKeys:["A","B","C","D"],isChose:null,isSubmit:null,messageDisable:!1}},computed:{curQuestion(){return this.allQuestion[this.curKey]},findAnswerList(){return this.answerList.find((s=>s.id===this.curQuestion?.id))},findCorrectAnswer(){return this.findAnswerList?.analysis.singleAnswer||this.findAnswerList?.analysis.multipleAnswer},yourChose(){return this.singleAnswer||this.multipleAnswer}},filters:{enumDifficulty:function(s){switch(s){case"1":return"简单";case"2":return"一般";case"3":return"困难"}},enumType:function(s){switch(s){case 1:return"『单选』";case 2:return"『多选』";case 3:return"『简答』"}}},watch:{yourChose:{handler(s){this.isChose=!!s.length},immediate:!0},"findAnswerList.isSubmit":{handler(s){this.isSubmit=s,this.messageDisable=!0}},curQuestion:{handler(s){this.findAnswerList?(this.isChose=!0,this.isSubmit=!0,2===this.findAnswerList.question.detail.type?(this.multipleAnswer=this.findAnswerList.yourAnswer,this.singleAnswer="",this.messageAnswer=""):1===this.findAnswerList.question.detail.type?(this.singleAnswer=this.findAnswerList.yourAnswer,this.multipleAnswer=[],this.messageAnswer=""):(this.messageAnswer=this.findAnswerList.yourAnswer,this.singleAnswer="",this.multipleAnswer=[])):(this.isChose=null,this.isSubmit=null,this.messageDisable=!1,this.singleAnswer="",this.messageAnswer="",this.multipleAnswer=[],document.querySelector(".active")?.classList.remove("active"))}},messageAnswer(s){s.length>0?this.isChose=!0:this.isChose=!1}},methods:{async getQuestion(){const{data:s}=await(0,r.w)(this.questionParams);this.allQuestion=s},chose(s,t){if(this.findAnswerList)return;const e=s.target;if(1===this.curQuestion.detail.type){if(this.singleAnswer===t)return;this.singleAnswer=t,e.parentNode.querySelector(".active")?.classList.remove("active"),e.classList.add("active")}else this.multipleAnswer.includes(t)?(this.multipleAnswer=this.multipleAnswer.filter((s=>s!==t)),e.parentNode.querySelector("."+t)?.classList.remove("active")):(e.classList.add("active"),this.multipleAnswer.push(t))},async submitQuestion(){const s={id:this.curQuestion.id};this.multipleAnswer.length>=1?s.multipleAnswer=this.multipleAnswer:this.singleAnswer&&(s.singleAnswer=this.singleAnswer);const{data:t}=await l(s);this.answerList.push({curKey:this.curKey,id:this.curQuestion.id,analysis:t,question:this.curQuestion,isSubmit:!0,yourAnswer:this.singleAnswer||this.messageAnswer||this.multipleAnswer})},getNextQuestion(){this.getQuestionsDetails(this.curKey+1)},async getQuestionsDetails(s){if(!this.allQuestion[s].detail){const{data:t}=await u(this.allQuestion[s].id);this.allQuestion[s].detail=t}this.answerSheetVisible=!1,this.curKey=s},goBack(){this.$dialog.confirm({title:"退出模拟面试",message:"确认退出模拟面试吗？"}).then((()=>{if(this.$router.replace("/question"),this.answerList.length){let s=JSON.parse(sessionStorage.getItem("answerList"))||[];s.push({value:this.answerList,key:this.questionParams}),sessionStorage.setItem("answerList",JSON.stringify(s))}})).catch((s=>s))}},async created(){this.getQuestion();const s=JSON.parse(sessionStorage.getItem("answerList"))||[];this.answerList=s.find((s=>s.key.type===this.questionParams.type&&s.key.city===this.questionParams.city))?.value||[]}},c=o,h=e(1001),d=(0,h.Z)(c,i,n,!1,null,"1ddc0b85",null),w=d.exports},4612:function(s,t,e){e.d(t,{c:function(){return n},w:function(){return r}});var i=e(5972);const n=()=>(0,i.Z)({url:"/interview/filters"}),r=s=>(0,i.Z)({url:"/interview/questions",params:s,needCancel:!0})}}]);