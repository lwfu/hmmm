"use strict";(self["webpackChunkhrmm"]=self["webpackChunkhrmm"]||[]).push([[588],{96588:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-view"},[n("van-nav-bar",{attrs:{"left-arrow":""},on:{"click-left":function(t){return e.$router.push("/find")}}}),n("div",{staticClass:"container"},[n("h3",[e._v("您好，请登录")]),n("van-form",{ref:"form",attrs:{"show-error":!1},on:{submit:e.onSubmit}},[n("van-field",{ref:"mobile",attrs:{"left-icon":"phone",name:"mobile",placeholder:"请输入手机号",rules:e.rules.mobileRule},model:{value:e.userInfo.mobile,callback:function(t){e.$set(e.userInfo,"mobile",t)},expression:"userInfo.mobile"}}),n("van-field",{staticClass:"codeIcon",attrs:{"left-icon":"passed",name:"code",placeholder:"请输入验证码",rules:e.rules.codeRule},scopedSlots:e._u([{key:"button",fn:function(){return[n("van-button",{staticClass:"getCode",attrs:{size:"small","native-type":"button",disabled:e.codeBtnDisable},on:{click:e.getCode}},[e._v(e._s(e.codeBtnContent))])]},proxy:!0}]),model:{value:e.userInfo.code,callback:function(t){e.$set(e.userInfo,"code",t)},expression:"userInfo.code"}}),n("p",[e._v(" 登录既同意"),n("span",[e._v("《用户使用协议》")]),e._v("和"),n("span",[e._v("《隐私协议》")])]),n("div",[n("van-button",{attrs:{round:"",block:"",color:"#ee0a24","native-type":"submit",loading:e.isLoading}},[e._v("确定")])],1)],1)],1)],1)},r=[],s=n(67906),a=n(16198),i=(n(74916),n(15306),n(16165)),c={data:function(){return{userInfo:{mobile:"18888888888",code:""},codeBtnDisable:!1,codeBtnContent:"获取验证码",rules:{mobileRule:[{required:!0,pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"手机号格式错误"}],codeRule:[{required:!0,pattern:/^\d{4}$/,message:"验证码格式错误"}]},isLoading:!1}},methods:{onSubmit:function(e){var t=this;return(0,a.Z)((0,s.Z)().mark((function n(){var o;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isLoading=!0,n.prev=1,n.next=4,t.$store.dispatch("getUserInfo",e);case 4:o=t.$route.query.backUrl,t.$router.replace(o||"/"),t.isLoading=!1,n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),t.isLoading=!1;case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},getCode:function(){var e=this;return(0,a.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.form.validateField("mobile").then((0,a.Z)((0,s.Z)().mark((function t(){var n,o;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setCodeBtnDisable(5),t.next=3,(0,i.WG)({mobile:e.userInfo.mobile});case 3:n=t.sent,o=n.data,e.userInfo.code=o,e.$toast.success("获取验证码成功："+o);case 7:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})))()},setCodeBtnDisable:function(e){var t=this;this.codeBtnDisable=!0,this.codeBtnContent="".concat(e,"s后获取");var n=setInterval((function(){t.codeBtnContent="".concat(--e,"s后获取"),e||(clearInterval(n),t.codeBtnDisable=!1,t.codeBtnContent="发送验证码")}),1e3)}}},l=c,u=n(1001),d=(0,u.Z)(l,o,r,!1,null,"4f75761e",null),f=d.exports}}]);