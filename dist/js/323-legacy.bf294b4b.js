"use strict";(self["webpackChunkhrmm"]=self["webpackChunkhrmm"]||[]).push([[323],{52323:function(s,e,t){t.r(e),t.d(e,{default:function(){return v}});var i=function(){var s=this,e=s.$createElement,t=s._self._c||e;return s.curQuestion?t("div",{staticClass:"interview"},[t("van-nav-bar",{attrs:{"right-text":"答题卡","left-arrow":"",fixed:"",placeholder:""},on:{"click-right":function(e){s.answerSheetVisible=!0},"click-left":s.goBack},scopedSlots:s._u([{key:"title",fn:function(){return[t("span",[s._v("面试题")]),t("span",{staticClass:"count"},[s._v(s._s(s.allQuestion.length))])]},proxy:!0}],null,!1,3357406339)}),t("div",{staticClass:"interview-main"},[t("div",{staticClass:"question_item"},[t("div",{staticClass:"question_title"},[s._v(" "+s._s(s._f("enumType")(s.curQuestion.detail.type))+s._s(s.curQuestion.detail.title)+" ")]),s._l(s.curQuestion.detail.tag,(function(e){return t("van-tag",{key:e,staticClass:"question_tag",attrs:{size:"large"}},[s._v(" "+s._s(e)+" ")])})),s._l(s.curQuestion.detail.option,(function(e,i){return t("div",{key:i,staticClass:"question_option",class:[{correctClass:s.findCorrectAnswer&&s.findCorrectAnswer.includes(s.optionKeys[i]),errorClass:s.findAnswerList&&!s.findAnswerList.analysis.isRight&&(s.singleAnswer===s.optionKeys[i]||s.multipleAnswer.filter((function(e){return!s.findCorrectAnswer.includes(e)})).includes(s.optionKeys[i])),active:s.findAnswerList&&(s.singleAnswer===s.optionKeys[i]||s.multipleAnswer.filter((function(e){return!s.findCorrectAnswer.includes(e)})).includes(s.optionKeys[i]))},s.optionKeys[i]],on:{click:function(e){return s.chose(e,s.optionKeys[i])}}},[s._v(" "+s._s(s.optionKeys[i])+"."+s._s(e)+" ")])})),s.curQuestion.detail.option?s._e():t("div",[t("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",placeholder:"请输入你的答案",disabled:s.messageDisable},model:{value:s.messageAnswer,callback:function(e){s.messageAnswer=e},expression:"messageAnswer"}})],1),s.findAnswerList?t("div",{staticClass:"question-analysis"},[t("h4",[s._v("答案解析")]),3!==s.curQuestion.detail.type?t("div",[t("p",[s._v(" 正确答案："+s._s([].concat(s.findCorrectAnswer).join(","))+" ")]),t("p",{class:{yourErrorAnswerStyle:!s.findAnswerList.analysis.isRight}},[s._v(" 你的答案："+s._s([].concat(s.yourChose).join(","))+" ")])]):s._e(),t("div",{staticClass:"analysis-tag"},[t("span",[s._v("难度："+s._s(s._f("enumDifficulty")(s.findAnswerList.analysis.difficulty)))]),t("span",[s._v("提交次数："+s._s(s.findAnswerList.analysis.submitNum))]),t("span",[s._v("正确次数："+s._s(s.findAnswerList.analysis.correctNum))])]),t("div",{staticClass:"analysis-text"},[s._v(" "+s._s(s.findAnswerList.analysis.answerAnalysis)+" ")])]):s._e()],2)]),t("div",{staticClass:"interview-tabbar"},[t("div",{staticClass:"interview-tabbar-icon"},[t("div",{staticClass:"star"},[t("van-icon",{attrs:{name:"star-o"}}),t("span",[s._v("收藏")])],1),t("div",{staticClass:"edit"},[t("van-icon",{attrs:{name:"edit"}}),t("span",[s._v("反馈")])],1)]),t("div",{staticClass:"interview-tabbar-count"},[t("span",{staticClass:"current"},[s._v(s._s(s.curKey+1))]),t("span",{staticClass:"total"},[s._v("/"+s._s(s.allQuestion.length)+"题")])]),t("div",{staticClass:"interview-tabbar-button"},[s.isSubmit?t("van-button",{attrs:{type:"info"},on:{click:s.getNextQuestion}},[s._v("下一题")]):t("van-button",{attrs:{type:"danger",disabled:!s.isChose},on:{click:s.submitQuestion}},[s._v(" 提 交 ")])],1)]),t("van-popup",{staticClass:"answer-sheet",style:{height:"60%"},attrs:{position:"bottom"},model:{value:s.answerSheetVisible,callback:function(e){s.answerSheetVisible=e},expression:"answerSheetVisible"}},[t("van-nav-bar",{attrs:{title:"答题卡"},scopedSlots:s._u([{key:"right",fn:function(){return[t("span",{staticClass:"current"},[s._v(s._s(s.curKey+1))]),t("span",[s._v("/"+s._s(s.allQuestion.length)+"题")])]},proxy:!0}],null,!1,3074321077)}),t("div",{staticClass:"total"},[s._v(" 共"+s._s(s.allQuestion.length)+"题 ")]),t("ul",{staticClass:"list"},s._l(s.allQuestion.length,(function(e,i){return t("li",{key:e,class:{current:i===s.curKey,correct:s.answerList.find((function(s){return s.curKey===i}))&&s.answerList.find((function(s){return s.curKey===i})).analysis.isRight,error:s.answerList.find((function(s){return s.curKey===i}))&&!s.answerList.find((function(s){return s.curKey===i})).analysis.isRight},on:{click:function(e){return s.getQuestionsDetails(i)}}},[s._v(" "+s._s(e)+" ")])})),0)],1)],1):s._e()},n=[],r=t(67906),a=t(16198),u=(t(69826),t(41539),t(26699),t(32023),t(57327),t(74916),t(15306),t(38862),t(94612)),l=t(25972),o=function(s){return(0,l.Z)({url:"/questions/submit",method:"POST",data:s})},c=function(s){return(0,l.Z)({url:"/questions/"+s})},d={data:function(){return{questionParams:{type:this.$route.params.questionId||"",city:this.$route.params.city||""},answerSheetVisible:!1,allQuestion:[],answerList:[],curKey:0,singleAnswer:"",multipleAnswer:[],messageAnswer:"",optionKeys:["A","B","C","D"],isChose:null,isSubmit:null,messageDisable:!1}},computed:{curQuestion:function(){return this.allQuestion[this.curKey]},findAnswerList:function(){var s=this;return this.answerList.find((function(e){var t;return e.id===(null===(t=s.curQuestion)||void 0===t?void 0:t.id)}))},findCorrectAnswer:function(){var s,e;return(null===(s=this.findAnswerList)||void 0===s?void 0:s.analysis.singleAnswer)||(null===(e=this.findAnswerList)||void 0===e?void 0:e.analysis.multipleAnswer)},yourChose:function(){return this.singleAnswer||this.multipleAnswer}},filters:{enumDifficulty:function(s){switch(s){case"1":return"简单";case"2":return"一般";case"3":return"困难"}},enumType:function(s){switch(s){case 1:return"『单选』";case 2:return"『多选』";case 3:return"『简答』"}}},watch:{yourChose:{handler:function(s){this.isChose=!!s.length},immediate:!0},"findAnswerList.isSubmit":{handler:function(s){this.isSubmit=s,this.messageDisable=!0}},curQuestion:{handler:function(s){var e;this.findAnswerList?(this.isChose=!0,this.isSubmit=!0,2===this.findAnswerList.question.detail.type?(this.multipleAnswer=this.findAnswerList.yourAnswer,this.singleAnswer="",this.messageAnswer=""):1===this.findAnswerList.question.detail.type?(this.singleAnswer=this.findAnswerList.yourAnswer,this.multipleAnswer=[],this.messageAnswer=""):(this.messageAnswer=this.findAnswerList.yourAnswer,this.singleAnswer="",this.multipleAnswer=[])):(this.isChose=null,this.isSubmit=null,this.messageDisable=!1,this.singleAnswer="",this.messageAnswer="",this.multipleAnswer=[],null===(e=document.querySelector(".active"))||void 0===e||e.classList.remove("active"))}},messageAnswer:function(s){s.length>0?this.isChose=!0:this.isChose=!1}},methods:{getQuestion:function(){var s=this;return(0,a.Z)((0,r.Z)().mark((function e(){var t,i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,u.w)(s.questionParams);case 2:t=e.sent,i=t.data,s.allQuestion=i;case 5:case"end":return e.stop()}}),e)})))()},chose:function(s,e){if(!this.findAnswerList){var t=s.target;if(1===this.curQuestion.detail.type){var i;if(this.singleAnswer===e)return;this.singleAnswer=e,null===(i=t.parentNode.querySelector(".active"))||void 0===i||i.classList.remove("active"),t.classList.add("active")}else{var n;if(this.multipleAnswer.includes(e))this.multipleAnswer=this.multipleAnswer.filter((function(s){return s!==e})),null===(n=t.parentNode.querySelector("."+e))||void 0===n||n.classList.remove("active");else t.classList.add("active"),this.multipleAnswer.push(e)}}},submitQuestion:function(){var s=this;return(0,a.Z)((0,r.Z)().mark((function e(){var t,i,n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={id:s.curQuestion.id},s.multipleAnswer.length>=1?t.multipleAnswer=s.multipleAnswer:s.singleAnswer&&(t.singleAnswer=s.singleAnswer),e.next=4,o(t);case 4:i=e.sent,n=i.data,s.answerList.push({curKey:s.curKey,id:s.curQuestion.id,analysis:n,question:s.curQuestion,isSubmit:!0,yourAnswer:s.singleAnswer||s.messageAnswer||s.multipleAnswer});case 7:case"end":return e.stop()}}),e)})))()},getNextQuestion:function(){this.getQuestionsDetails(this.curKey+1)},getQuestionsDetails:function(s){var e=this;return(0,a.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.allQuestion[s].detail){t.next=6;break}return t.next=3,c(e.allQuestion[s].id);case 3:i=t.sent,n=i.data,e.allQuestion[s].detail=n;case 6:e.answerSheetVisible=!1,e.curKey=s;case 8:case"end":return t.stop()}}),t)})))()},goBack:function(){var s=this;this.$dialog.confirm({title:"退出模拟面试",message:"确认退出模拟面试吗？"}).then((function(){if(s.$router.replace("/question"),s.answerList.length){var e=JSON.parse(sessionStorage.getItem("answerList"))||[];e.push({value:s.answerList,key:s.questionParams}),sessionStorage.setItem("answerList",JSON.stringify(e))}})).catch((function(s){return s}))}},created:function(){var s=this;return(0,a.Z)((0,r.Z)().mark((function e(){var t,i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.getQuestion(),i=JSON.parse(sessionStorage.getItem("answerList"))||[],s.answerList=(null===(t=i.find((function(e){return e.key.type===s.questionParams.type&&e.key.city===s.questionParams.city})))||void 0===t?void 0:t.value)||[];case 3:case"end":return e.stop()}}),e)})))()}},f=d,h=t(1001),w=(0,h.Z)(f,i,n,!1,null,"1ddc0b85",null),v=w.exports},32023:function(s,e,t){var i=t(82109),n=t(1702),r=t(3929),a=t(84488),u=t(41340),l=t(84964),o=n("".indexOf);i({target:"String",proto:!0,forced:!l("includes")},{includes:function(s){return!!~o(u(a(this)),u(r(s)),arguments.length>1?arguments[1]:void 0)}})},94612:function(s,e,t){t.d(e,{c:function(){return n},w:function(){return r}});var i=t(25972),n=function(){return(0,i.Z)({url:"/interview/filters"})},r=function(s){return(0,i.Z)({url:"/interview/questions",params:s,needCancel:!0})}}}]);